var tango;!function(a){"use strict";function b(a,b){return new r(a,b)}var c,d="set",e="domValueChanged",f="domChanged",g="unbind",h="dispose",i="change",j=/\((.*)\)/g,k=".",l="->",m=/\${([\w]*)}/g;!function(a){function b(a,b){return a&&-1!==a.indexOf(b)}function c(a,c){return b(a,c)?a.split(c).map(function(a){return a.trim()}).filter(function(a){return!!a}):[a.trim()]}function d(a,b,c){return c||(c=0),a.lastIndexOf(b,c)===c}function e(a){return a.replace(/^\s+|\s+$/g,"")}a.contains=b,a.split=c,a.startsWith=d,a.trim=e}(c=a.str||(a.str={}));var n;!function(a){function b(a){return!!a&&"number"==typeof a.length}function d(a){return void 0!==a&&null!==a}function e(a){return"function"==typeof a}function f(a){if(!a||a instanceof Date||a instanceof RegExp)return!1;var b=typeof a;return"object"===b||"function"===b}function g(a,b){var c=j.exec(b);if(c)return c[1];var e;if(-1===b.indexOf(k))e=a[b];else{for(var f=b.split(k),g=a,h=0;h<f.length;h++){var i=f[h],l=g[i];if(!d(l))return"";g=l}e=g}return d(e)?e:""}function h(a,b,c,f){var g;g=e(a)?c.call(f||a,c):c;var h=a,i=b;if(-1!==b.indexOf(k)){for(var j=b.split(k),l=a,m=0;m<j.length-1;m++){var n=j[m],o=l[n];if(!d(l))return!1;if(!d(l))return!1;l=o}var p=j[j.length-1];h=l,i=p}return e(h[i])?(h[i].call(f||a,g),!0):(h[i]=g,!0)}function i(a,b,d){for(var f=c.split(b,l),h=d,i=0;i<f.length;i++){var j=g(a,f[i]);if(h=e(j)?j.call(this.data,h):j,void 0===h)return void 0}return h}a.isCollection=b,a.isDefined=d,a.isFunction=e,a.isObject=f,a.getProperty=g,a.setProperty=h,a.evaluate=i}(n=a.obj||(a.obj={}));var o;!function(a){function b(a,b){for(var c=0;c<a.length;c++)b(a[c],c)}function c(a,b){for(var c=a.length-1,d=c;d>-1;d--)b(a[d],d)}function d(a,b){for(var c=[],d=0;d<a.length;d++)b(a[d])&&c.push(a[d]);return c}function e(a,b){for(var c=0;c<a.length;c++)if(b(a[c]))return a[c];return void 0}function f(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1}function g(a,b){for(var c=0;c<a.length;c++)if(b(a[c]))return!0;return!1}function h(a,b){for(var c=0;c<a.length;c++)if(b(a[c]))return!1;return a.length>0}function i(a,b){for(var c=a,d=0;d<b.length;d++)c.push(b[d]);return a}function j(a){return Array.prototype.slice.call(this.collection,0)}a.each=b,a.eachRight=c,a.filter=d,a.find=e,a.has=f,a.hasAny=g,a.hasEvery=h,a.merge=i,a.toArray=j}(o=a.list||(a.list={}));var p;!function(a){function b(a){return"true"===a.contentEditable?k:a.multiple?j:i}function c(a,c){switch(b(a)){case k:a.innerHTML=c;break;case j:var d=a,e=n.isCollection(c)?c:[c];o.each(d.options,function(a){a.selected=o.has(e,a.value)});break;default:var f=a;f.value=String(c)}}function d(a){switch(b(a)){case k:return a.innerHTML;case j:var c=a;return c.options;default:var d=a;return d.value}}function e(a,b){a.textContent=b}function f(a){return a.textContent}function g(a,b){a.innerHTML=b}function h(a){return a.innerHTML}var i=0,j=1,k=2;a.setValue=c,a.getValue=d,a.setText=e,a.getText=f,a.setHtml=g,a.getHtml=h}(p=a.dom||(a.dom={}));var q=function(){function a(){this.cache={}}return a.prototype.on=function(a,b){var c=this.cache[a];return c?void(o.has(c,b)||this.cache[a].push(b)):(c=[],c.push(b),void(this.cache[a]=c))},a.prototype.off=function(a,b){var c=this.cache[a];n.isCollection(c)&&o.eachRight(c,function(a,d){a===b&&c.splice(d,1)})},a.prototype.trigger=function(a,b,c){var d=this,e=this.cache[a];e&&(c?o.each(e,function(a){a.call(d,b)}):o.each(e,function(a){setTimeout(function(){a.call(d,b)})}))},a.prototype.dispose=function(){this.cache&&(this.cache=null)},a}();a.Observer=q;var r=function(){function a(a,b){var c=this;this._events=new q,"string"==typeof a?this.$el=document.querySelector(a):this.$el=a,this.$model=b;for(var d in this.$model)this._watch(d,this.$model);this._bind(),this._events.on(e,function(a){n.setProperty(c.$model,a.propertyPath,a.newValue)})}return a.prototype.$on=function(a,b){this._events.on(a,b)},a.prototype.$off=function(a,b){this._events.off(a,b)},a.prototype.$trigger=function(a,b){this._events.trigger(a,b)},a.prototype.$dispose=function(){this._events.dispose()},a.prototype._watch=function(a,b){var c=n.getProperty(b,a),e=this;if(Object.defineProperty(b,a,{get:function(){return c},set:function(b){var f=c;c=b,e.$trigger(d,{propertyPath:a,newValue:b}),f!==b&&e.$trigger(i,{propertyPath:a,newValue:b,oldValue:c})},configurable:!0}),n.isObject(c))for(var f in c)this._watch(f,c)},a.prototype._bind=function(){var a=this,b=this.getMutationObserver(this.$el);this._setupNode(this.$el,void 0),this._events.on(g,function(c){c.node===a.$el&&b.disconnect()}),this.$on(h,function(){return b.disconnect()})},a.prototype._unbind=function(){this.$trigger(g,{element:this.$el})},a.prototype._setupEvent=function(a,b,c,d){var e=function(){return b.removeEventListener(a,c)};b.addEventListener(a,c),this.$on(g,function(a){d(a)&&e()}),this.$on(h,e)},a.prototype._setupOnEvent=function(a,b){var d=this;if(c.startsWith(a.nodeName,"on-")){var e=a.nodeName.substr(3),f=function(b){return n.evaluate(d.$model,a.nodeValue,b)};this._setupEvent(e,b,f,function(b){return b.node===a})}},a.prototype._setupConditionalClasses=function(a,b){var d=this;if(c.startsWith(a.nodeName,"is-")){var e=a.nodeName.substr(3),f=function(){var c=n.evaluate(d.$model,a.nodeValue);return c?void b.classList.add(e):void b.classList.remove(e)};f(),this.$on(i,f)}},a.prototype._setupValueBindings=function(a,b){var c=this,d=a.nodeValue,e=function(){var a=p.getValue(b);n.setProperty(c.$model,d,a)},f=function(b){return b.node===a};this.$on(i,function(a){if(d===a.propertyPath){var e=n.evaluate(c.$model,d);p.setValue(b,e)}}),this._setupEvent("input",b,e,f),this._setupEvent("change",b,e,f)},a.prototype._setupTextBindings=function(a,b){var c=this,d=a.nodeValue;this.$on(i,function(){var a=p.getText(b);n.setProperty(c.$model,d,a)})},a.prototype._setupHtmlBindings=function(a,b){var c=this,d=a.nodeValue;this.$on(i,function(){var a=p.getHtml(b);n.setProperty(c.$model,d,a)})},a.prototype._setupPropertyBindings=function(a,b){switch(a.nodeName){case"bind-value":return void this._setupValueBindings(a,b);case"bind-text":return void this._setupTextBindings(a,b);case"bind-html":return void this._setupHtmlBindings(a,b);case"bind-items":return}},a.prototype._setupTokens=function(a,b){var c=this,d=m.exec(a.nodeValue);if(d&&!(d.length<1)){var g=d[1],h="${"+g+"}",j=a.nodeValue,k=function(){var b=n.evaluate(c.$model,g);a.nodeValue=j.replace(h,b)};this.$on(i,function(a){g===a.propertyPath&&k()}),this.$on(f,function(b){b.node===a&&c.$trigger(e,{propertyPath:g,newValue:a.nodeValue})}),k()}},a.prototype._setupNode=function(a,b){var c=this;if(a.nodeType===Node.TEXT_NODE)return void this._setupTokens(a,b);if(a.nodeType===Node.ELEMENT_NODE){var d=a;return o.each(d.attributes,function(a){return c._setupNode(a,d)}),void o.each(d.childNodes,function(a){return c._setupNode(a,d)})}return a.nodeType===Node.ATTRIBUTE_NODE?(this._setupOnEvent(a,b),this._setupConditionalClasses(a,b),this._setupTokens(a,b),void this._setupPropertyBindings(a,b)):void 0},a.prototype.getMutationObserver=function(a){var b=this;if("undefined"!=typeof MutationObserver){var c=new MutationObserver(function(a){o.each(a,function(a){if("attributes"===a.type){var c=a.target.getAttributeNode(a.attributeName);b.$trigger(f,{node:c})}})});return c.observe(a,{attributes:!0,childList:!0,characterData:!1,subtree:!0}),c}},a}();a.Observable=r,a.bind=b}(tango||(tango={}));